# [BOJ2234 성곽](https://www.acmicpc.net/problem/2234)

### 난이도

***
G4
<br><br>

### 문제

***
![](https://www.acmicpc.net/JudgeOnline/upload/201008/cas.PNG)

대략 위의 그림과 같이 생긴 성곽이 있다. 굵은 선은 벽을 나타내고, 점선은 벽이 없어서 지나다닐 수 있는 통로를 나타낸다. 이러한 형태의 성의 지도를 입력받아서 다음을 계산하는 프로그램을 작성하시오.

1. 이 성에 있는 방의 개수
2. 가장 넓은 방의 넓이
3. 하나의 벽을 제거하여 얻을 수 있는 가장 넓은 방의 크기

위의 예에서는 방은 5개고, 가장 큰 방은 9개의 칸으로 이루어져 있으며, 위의 그림에서 화살표가 가리키는 벽을 제거하면 16인 크기의 방을 얻을 수 있다.

성은 m×n(1 ≤ m, n ≤ 50)개의 정사각형 칸으로 이루어진다. 성에는 최소 두 개의 방이 있어서, 항상 하나의 벽을 제거하여 두 방을 합치는 경우가 있다.

<br><br>

### 입력

***
첫째 줄에 두 정수 n, m이 주어진다. 다음 m개의 줄에는 n개의 정수로 벽에 대한 정보가 주어진다. 벽에 대한 정보는 한 정수로 주어지는데, 서쪽에 벽이 있을 때는 1을, 북쪽에 벽이 있을 때는 2를, 동쪽에
벽이 있을 때는 4를, 남쪽에 벽이 있을 때는 8을 더한 값이 주어진다. 참고로 이진수의 각 비트를 생각하면 쉽다. 따라서 이 값은 0부터 15까지의 범위 안에 있다.
<br><br>

### 출력

***
첫째 줄에 1의 답을, 둘째 줄에 2의 답을, 셋째 줄에 3의 답을 출력한다.

<br><br>

#### 예제 입력 1

> 7 4       
11 6 11 6 3 10 6        
7 9 6 13 5 15 5     
1 10 12 7 13 7 5        
13 11 10 8 10 12 13

#### 예제 출력 1

> 5     
9       
16

<br><br>

### 알고리즘 분류

***

* 그래프 이론
* 그래프 탐색
* 너비 우선 탐색
* 비트마스킹

<br><br>

### Solution

***
이 문제는 기존의 그래프 탐색에서 벽이 한칸을 차지한것과는 다르게 벽이 칸을 차지하고 있지 않다. 각 칸에 4방향의 벽에 대한 정보가 비트로 주어졌다. 이에 대한 설명은 문제에 잘 설명이 되어 있다. 사실 비트를
핸들링해서 각 영역의 넓이를 구하는건 어렵지 않다. 조건 3가지를 체크를 해주면 된다.

1. 경계값 (그래프 범위를 벗어난 값 조사)
2. 처음 지나는 지점인가
3. 현재 지점에서 다음 지점으로 가는데 벽이 없는가

이중 아마 세번째 조건이 생소할 것이다. 벽의 유무는 우선 해당 방향에 벽이 있는가를 조사하면 된다. 만약 서쪽으로 가려면 map[cr][cc]&1<<0 이 0 인 경우가 벽이 존재하지 않는 경우이다. 그리고 벽을
하나 허문경우 가장 큰 넓이가 되는 경우를 출력해야 한다. 이 조건은 visited 를 그룹의 번호로 지정해주고 각 그룹의 넓이를 List에 저장을 하면 된다. 이후에 이 경우에도 현재 지점을 기준으로 3가지 조건을
체크해 주면 된다.

1. 벽을 허물면 그 다음 지점이 범위 내에 있는가
2. 벽이 존재 하는가?
3. 그룹 번호가 다른가?

그룹 번호가 같으면 같은 영역인데 더해버리는 불상사를 막기위한 3번 조건이고, 이 조건을 위해서 visited 를 boolean형이 아닌 int 형으로 그룹 번호를 저장한 것이다. (0 = 그룹 없음 = 방문 이력
없음, 1~ 그룹 번호)
비트를 잘 핸들링만 하면 어렵지 않은 문제였다.

<br><br>

### [전체 코드](https://github.com/Jungmin-Seo0527/CodingTest/blob/main/src/dfs_bfs/BOJ2234_성곽.java)
